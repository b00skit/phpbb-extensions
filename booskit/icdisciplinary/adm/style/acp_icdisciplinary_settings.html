{% INCLUDE 'overall_header.html' %}

<h1>{{ lang('ACP_BOOSKIT_ICDISCIPLINARY_TITLE') }}</h1>

<form id="acp_booskit_icdisciplinary" method="post" action="{{ U_ACTION }}">

<fieldset>
	<legend>{{ lang('ACP_ICDISCIPLINARY_SETTINGS') }}</legend>
	<dl>
		<dt><label for="booskit_icdisciplinary_source">{{ lang('BOOSKIT_ICDISCIPLINARY_SOURCE') }}{{ lang('COLON') }}</label><br><span>{{ lang('BOOSKIT_ICDISCIPLINARY_SOURCE_EXPLAIN') }}</span></dt>
		<dd>
			<label><input type="radio" class="radio" name="booskit_icdisciplinary_source" value="url" {% if BOOSKIT_ICDISCIPLINARY_SOURCE == 'url' %}checked="checked"{% endif %} /> {{ lang('BOOSKIT_ICDISCIPLINARY_SOURCE_URL') }}</label>
			<label><input type="radio" class="radio" name="booskit_icdisciplinary_source" value="local" {% if BOOSKIT_ICDISCIPLINARY_SOURCE == 'local' %}checked="checked"{% endif %} /> {{ lang('BOOSKIT_ICDISCIPLINARY_SOURCE_LOCAL') }}</label>
		</dd>
	</dl>

	<div id="booskit_icdisciplinary_url_settings">
		<dl>
			<dt><label for="booskit_icdisciplinary_json_url">{{ lang('BOOSKIT_ICDISCIPLINARY_JSON_URL') }}{{ lang('COLON') }}</label><br><span>{{ lang('BOOSKIT_ICDISCIPLINARY_JSON_URL_EXPLAIN') }}</span></dt>
			<dd><input type="text" id="booskit_icdisciplinary_json_url" name="booskit_icdisciplinary_json_url" value="{{ BOOSKIT_ICDISCIPLINARY_JSON_URL }}" size="50"></dd>
		</dl>
	</div>

	<dl>
		<dt><label for="booskit_icdisciplinary_ruleset">{{ lang('RULES') }}{{ lang('COLON') }}</label><br><span>{{ lang('RULES_EXPLAIN') }}</span></dt>
		<dd>
			<textarea name="booskit_icdisciplinary_ruleset" id="booskit_icdisciplinary_ruleset" rows="10" cols="60" style="width: 95%;">{{ BOOSKIT_ICDISCIPLINARY_RULESET }}</textarea>
			<input type="hidden" name="booskit_icdisciplinary_ruleset_uid" value="{{ BOOSKIT_ICDISCIPLINARY_RULESET_UID }}" />
			<input type="hidden" name="booskit_icdisciplinary_ruleset_bitfield" value="{{ BOOSKIT_ICDISCIPLINARY_RULESET_BITFIELD }}" />
			<input type="hidden" name="booskit_icdisciplinary_ruleset_options" value="{{ BOOSKIT_ICDISCIPLINARY_RULESET_OPTIONS }}" />
		</dd>
	</dl>

	<dl>
		<dt><label for="booskit_icdisciplinary_access_l1">{{ lang('BOOSKIT_ICDISCIPLINARY_ACCESS_L1') }}{{ lang('COLON') }}</label><br><span>{{ lang('BOOSKIT_ICDISCIPLINARY_ACCESS_EXPLAIN') }}</span></dt>
		<dd><input type="text" id="booskit_icdisciplinary_access_l1" name="booskit_icdisciplinary_access_l1" value="{{ BOOSKIT_ICDISCIPLINARY_ACCESS_L1 }}" size="50"></dd>
	</dl>
	<dl>
		<dt><label for="booskit_icdisciplinary_access_l2">{{ lang('BOOSKIT_ICDISCIPLINARY_ACCESS_L2') }}{{ lang('COLON') }}</label><br><span>{{ lang('BOOSKIT_ICDISCIPLINARY_ACCESS_EXPLAIN') }}</span></dt>
		<dd><input type="text" id="booskit_icdisciplinary_access_l2" name="booskit_icdisciplinary_access_l2" value="{{ BOOSKIT_ICDISCIPLINARY_ACCESS_L2 }}" size="50"></dd>
	</dl>
	<dl>
		<dt><label for="booskit_icdisciplinary_access_full">{{ lang('BOOSKIT_ICDISCIPLINARY_ACCESS_FULL') }}{{ lang('COLON') }}</label><br><span>{{ lang('BOOSKIT_ICDISCIPLINARY_ACCESS_EXPLAIN') }}</span></dt>
		<dd><input type="text" id="booskit_icdisciplinary_access_full" name="booskit_icdisciplinary_access_full" value="{{ BOOSKIT_ICDISCIPLINARY_ACCESS_FULL }}" size="50"></dd>
	</dl>

	<p class="submit-buttons">
		<input class="button1" type="submit" name="submit" value="{{ lang('SUBMIT') }}" />
	</p>
</fieldset>

<div id="booskit_icdisciplinary_local_settings">
	<fieldset>
		<legend>{{ lang('BOOSKIT_ICDISCIPLINARY_LOCAL_DEFINITIONS') }}</legend>
		<p>{{ lang('BOOSKIT_ICDISCIPLINARY_LOCAL_DEFINITIONS_EXPLAIN') }}</p>

		<table class="table1 zebra-table">
		<thead>
		<tr>
			<th>{{ lang('ID') }}</th>
			<th>{{ lang('NAME') }}</th>
			<th>{{ lang('DESCRIPTION') }}</th>
			<th>{{ lang('COLOR') }}</th>
			<th>{{ lang('ACCESS_LEVEL') }}</th>
			<th>{{ lang('ACTION') }}</th>
		</tr>
		</thead>
		<tbody>
		{% for def in LOCAL_DEFINITIONS %}
		<tr>
			<td><input type="text" name="id[{{ def.def_id }}]" value="{{ def.disc_id }}" /></td>
			<td><input type="text" name="name[{{ def.def_id }}]" value="{{ def.disc_name }}" /></td>
			<td><textarea name="desc[{{ def.def_id }}]" rows="2">{{ def.disc_desc }}</textarea></td>
			<td><input type="color" name="color[{{ def.def_id }}]" value="{{ def.disc_color }}" /></td>
			<td><input type="number" name="access_level[{{ def.def_id }}]" value="{{ def.access_level }}" min="0" max="4" style="width: 50px;" /></td>
			<td>
				<button type="submit" name="submit" class="button2" formaction="{{ U_ACTION }}&amp;action=update_one&amp;def_id={{ def.def_id }}">{{ lang('UPDATE') }}</button>
				<a href="{{ U_ACTION }}&amp;action=delete&amp;def_id={{ def.def_id }}" class="button2">{{ lang('DELETE') }}</a>
			</td>
		</tr>
		{% endfor %}
		</tbody>
		</table>
	</fieldset>

	<fieldset>
		<legend>{{ lang('ADD') }}</legend>
		<dl>
			<dt>{{ lang('ID') }}</dt>
			<dd><input type="text" name="new_id" placeholder="ID" /></dd>
		</dl>
		<dl>
			<dt>{{ lang('NAME') }}</dt>
			<dd><input type="text" name="new_name" placeholder="Name" /></dd>
		</dl>
		<dl>
			<dt>{{ lang('DESCRIPTION') }}</dt>
			<dd><textarea name="new_desc" rows="2" placeholder="Description"></textarea></dd>
		</dl>
		<dl>
			<dt>{{ lang('COLOR') }}</dt>
			<dd><input type="color" name="new_color" value="#000000" /></dd>
		</dl>
		<dl>
			<dt>{{ lang('ACCESS_LEVEL') }}</dt>
			<dd><input type="number" name="new_access_level" value="0" min="0" max="4" style="width: 50px;" /></dd>
		</dl>
		<p class="submit-buttons">
			<input class="button1" type="submit" name="submit" value="{{ lang('ADD') }}" formaction="{{ U_ACTION }}&amp;action=add" />
		</p>
	</fieldset>
</div>

{{ S_FORM_TOKEN }}
</form>

<script>
(function() {
	var urlSettings = document.getElementById('booskit_icdisciplinary_url_settings');
	var localSettings = document.getElementById('booskit_icdisciplinary_local_settings');
	var radios = document.getElementsByName('booskit_icdisciplinary_source');

	function updateVisibility() {
		var selected = '';
		for (var i = 0; i < radios.length; i++) {
			if (radios[i].checked) {
				selected = radios[i].value;
				break;
			}
		}

		if (selected === 'url') {
			urlSettings.style.display = 'block';
			localSettings.style.display = 'none';
		} else {
			urlSettings.style.display = 'none';
			localSettings.style.display = 'block';
		}
	}

	for (var i = 0; i < radios.length; i++) {
		radios[i].addEventListener('change', updateVisibility);
	}
	updateVisibility();
})();
</script>

{% INCLUDE 'overall_footer.html' %}
